# CodePilot1C EDT — подключение Claude Code, Cursor и Codex к вашему EDT-проекту

Сборка: `0.1.7.20260217-0656`

В CodePilot1C появился встроенный MCP-сервер с авторизацией. Теперь любой AI-клиент — Claude Code, Cursor, Codex — может подключиться к вашему EDT-проекту по HTTP и использовать все инструменты плагина: работу с метаданными, навигацию по коду, диагностику.

---

## Что это даёт

Раньше внешние AI-клиенты не могли напрямую работать с вашим 1С-проектом в EDT. Теперь плагин сам поднимает HTTP-сервер на `127.0.0.1:8765` с полноценной авторизацией — подключение в одну команду.

**Пример для Claude Code:**

```bash
claude mcp add --transport http -s user codepilot1c http://127.0.0.1:8765/mcp
```

После этого Claude Code получает доступ ко всем инструментам CodePilot1C: может читать и создавать объекты конфигурации, анализировать код, запускать диагностику — всё через ваш работающий EDT.

Подтверждена совместимость с Claude Code, Cursor и Codex.

---

## Что изменено

### Встроенный HTTP-сервер с авторизацией OAuth 2.1

Плагин поднимает локальный HTTP-сервер, к которому подключаются внешние AI-клиенты. Авторизация реализована по стандарту MCP Auth (RFC 9728) — тому же, который используют Claude Code и Cursor. Поддерживаются:

- Автоматическая регистрация клиента (Dynamic Client Registration)
- Авторизация через код + PKCE
- Обновление токена (Refresh Token)
- Резервный вариант — статический Bearer-токен для клиентов без OAuth

### Интерфейс управления на русском языке

В настройках плагина добавлена панель MCP Host: индикатор статуса сервера, проверка работоспособности (`/health`), готовые команды подключения для разных клиентов. Всё на русском.

### Исправлена политика вызова инструментов

При подключении через MCP Host инструменты, изменяющие конфигурацию, теперь не блокируются запросом подтверждения по умолчанию. Политика мутаций изменена на «Разрешить» — внешний клиент может работать автономно, без ручного подтверждения каждого действия в EDT.

---

## Подключение

1. В настройках клиента укажите endpoint: `http://127.0.0.1:8765/mcp`
2. Для Claude Code:
   `claude mcp add --transport http -s user codepilot1c http://127.0.0.1:8765/mcp`

---

## Кому это нужно

Эта возможность для тех, кто хочет использовать привычный AI-клиент (Claude Code в терминале, Cursor, Codex) для работы с 1С-проектом — и при этом иметь доступ ко всем инструментам EDT: метаданным, диагностике, навигации по BSL-коду. Плагин становится мостом между современными AI-инструментами и платформой 1С.
