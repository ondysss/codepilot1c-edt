# CodePilot1C EDT — автотесты через Vanessa Automation и встроенный терминал

Сборка: `0.1.7.20260301-0607`

Агент теперь умеет писать и запускать автотесты. Полный цикл: проверить окружение, найти нужные шаги из каталога, сгенерировать .feature-сценарий с валидацией, запустить тесты — всё из чата, без переключения в терминал или внешние инструменты. Плюс в EDT появился встроенный терминал с настройками запуска в папке проекта.

---

## QA / Vanessa Automation

### Что умеет агент

Четыре новых инструмента, которые работают в связке:

1. **qa_status** — проверка окружения: установлена ли VA, доступна ли EPF, готова ли база. Агент вызывает это первым, прежде чем пытаться что-то запускать.

2. **qa_steps_search** — поиск шагов по встроенному каталогу. Агент ищет нужные шаги по описанию задачи, а не придумывает их из головы.

3. **qa_scaffold** — генерация .feature-файла с валидацией. Каждый шаг в сценарии проверяется по каталогу — если шага не существует, агент об этом узнает до запуска, а не после падения теста.

4. **qa_run** — запуск E2E-тестов через Vanessa Automation.

### Встроенный каталог шагов

В плагин встроен `steps_catalog.json` — полный каталог шагов VA. Агент использует только известные шаги, а не генерирует несуществующие формулировки. Это ключевое отличие от подхода "попросить LLM написать .feature" — модель не галлюцинирует шаги, а выбирает из реального каталога.

### Настройки

В Preferences добавлен параметр: путь к EPF-файлу Vanessa Automation. Указываете один раз — дальше агент знает где искать.

---

## Встроенный терминал

TM Terminal теперь идёт как обязательная зависимость плагина — устанавливается автоматически, без ручной доустановки.

Зачем это важно: терминал прямо в EDT позволяет запускать CLI-агенты — Claude Code, Qwen Code, Codex — не выходя из IDE. Открыли терминал в папке проекта, запустили агента, он работает с теми же файлами что вы видите в EDT. Никакого переключения между окнами.

В UI добавлена команда "Открыть терминал". Настройки запуска:

- Стартовая папка: проект / выбранный элемент / workspace / домашняя
- Опция "Всегда использовать активный проект"
- `NO_COLOR=1` для CLI без ANSI-цветов
- Префикс заголовка вкладки

---

## Зачем это нужно

Автоматическое тестирование — одна из самых запрашиваемых фич. Теперь можно описать сценарий в промпте ("напиши тест: создать документ поступления, провести, проверить что остатки записались") — агент найдёт нужные шаги VA, соберёт .feature с валидацией, запустит. Весь цикл разработки замыкается в EDT: написал код → агент проверил → запустил тест.
